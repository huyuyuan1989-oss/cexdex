<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”— å…¨éˆè³‡é‡‘æµå‘æˆ°æƒ…å®¤ | Capital Flow Terminal</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Noto+Sans+TC:wght@400;500;700&display=swap"
        rel="stylesheet">
    <style>
        :root {
            /* Financial Terminal Theme (Slate-900 base) */
            --bg-body: #0f172a;
            /* Slate 900 */
            --bg-card: #1e293b;
            /* Slate 800 */
            --bg-header: #334155;
            /* Slate 700 */
            --border: #475569;
            /* Slate 600 */

            --text-primary: #f8fafc;
            /* Slate 50 */
            --text-secondary: #94a3b8;
            /* Slate 400 */

            /* High Contrast Financial Colors */
            --bullish: #22c55e;
            /* Green 500 */
            --bullish-bg: rgba(34, 197, 94, 0.15);
            --bearish: #ef4444;
            /* Red 500 */
            --bearish-bg: rgba(239, 68, 68, 0.15);
            --neutral: #fbbf24;
            /* Amber 400 */
            --neutral-bg: rgba(251, 191, 36, 0.15);

            --accent: #6366f1;
            /* Indigo 500 */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans TC', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-body);
            color: var(--text-primary);
            line-height: 1.6;
            padding: 1.5rem;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }

            .container {
                padding: 0;
            }

            h1 {
                font-size: 1.5rem !important;
            }

            .stats-grid {
                grid-template-columns: 1fr;
                gap: 0.75rem;
            }

            /* Make tables scrollable horizontally */
            .table-container {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            table {
                min-width: 600px;
                /* Force minimum width to ensure columns don't squash */
            }

            th,
            td {
                padding: 0.75rem 0.5rem;
                white-space: nowrap;
            }

            .weather-banner {
                flex-direction: column;
                text-align: center;
                gap: 0.5rem;
            }

            .btn-group {
                flex-direction: column;
                width: 100%;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }
        }

        /* Typography */
        h1,
        h2,
        h3 {
            font-family: 'Noto Sans TC', sans-serif;
            font-weight: 700;
            color: var(--text-primary);
        }

        .mono {
            font-family: 'JetBrains Mono', monospace;
        }

        /* 2. AI Market Weather Banner */
        .weather-banner {
            padding: 1rem 1.5rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            border: 1px solid transparent;
            font-weight: 500;
        }

        .weather-bullish {
            background: rgba(34, 197, 94, 0.1);
            border-color: var(--bullish);
            color: #4ade80;
        }

        .weather-bearish {
            background: rgba(239, 68, 68, 0.1);
            border-color: var(--bearish);
            color: #f87171;
        }

        .weather-neutral {
            background: rgba(251, 191, 36, 0.1);
            border-color: var(--neutral);
            color: var(--neutral);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--bg-card);
            padding: 1.25rem;
            border-radius: 12px;
            border: 1px solid var(--border);
            transition: transform 0.2s;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            border-color: var(--accent);
        }

        .stat-value {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
            font-family: 'JetBrains Mono', monospace;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        /* Colors */
        .text-green {
            color: var(--bullish);
        }

        .text-red {
            color: var(--bearish);
        }

        .text-neutral {
            color: var(--text-secondary);
        }

        /* 3. Interactive Tables */
        .section {
            margin-bottom: 2.5rem;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 1rem;
        }

        .table-container {
            background: var(--bg-card);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid var(--border);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }

        th {
            background: var(--bg-header);
            padding: 1rem;
            text-align: right;
            font-weight: 600;
            color: var(--text-secondary);
            user-select: none;
            border-bottom: 2px solid var(--border);
            white-space: nowrap;
        }

        th:first-child {
            text-align: left;
        }

        td {
            padding: 1rem;
            text-align: right;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            font-family: 'JetBrains Mono', monospace;
        }

        td:first-child {
            text-align: left;
            font-family: 'Noto Sans TC', sans-serif;
            font-weight: 500;
        }

        tr:hover {
            background: rgba(255, 255, 255, 0.02);
        }

        tr:last-child td {
            border-bottom: none;
        }

        /* Sorting Header */
        .sortable {
            cursor: pointer;
            transition: color 0.2s;
        }

        .sortable:hover {
            color: var(--text-primary);
        }

        .sort-icon {
            font-size: 0.7em;
            margin-left: 4px;
            opacity: 0.5;
        }

        .sortable.active {
            color: var(--accent);
        }

        .sortable.active .sort-icon {
            opacity: 1;
        }

        /* Tooltips */
        .has-tooltip {
            position: relative;
            border-bottom: 1px dotted var(--text-secondary);
        }

        .has-tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 120%;
            left: 50%;
            transform: translateX(-50%);
            background: #000;
            color: #fff;
            padding: 0.5rem 0.8rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 400;
            white-space: pre-wrap;
            width: max-content;
            max-width: 250px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            z-index: 10;
            border: 1px solid var(--border);
            text-align: center;
        }

        /* Tags */
        .tag {
            display: inline-block;
            padding: 0.2rem 0.6rem;
            border-radius: 4px;
            font-size: 0.75rem;
            margin-left: 0.5rem;
            font-family: 'Noto Sans TC', sans-serif;
            font-weight: 500;
        }

        .tag-bullish {
            background: var(--bullish-bg);
            color: var(--bullish);
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .tag-bearish {
            background: var(--bearish-bg);
            color: var(--bearish);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .tag-neutral {
            background: var(--neutral-bg);
            color: var(--neutral);
            border: 1px solid rgba(251, 191, 36, 0.3);
        }

        /* 5. Quant Zone */
        .quant-zone {
            background: linear-gradient(180deg, var(--bg-card) 0%, rgba(30, 41, 59, 0.5) 100%);
            border: 1px dashed var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            margin-top: 3rem;
        }

        .btn-group {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        .btn {
            background: var(--bg-header);
            color: var(--text-primary);
            padding: 0.6rem 1.2rem;
            border-radius: 8px;
            text-decoration: none;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s;
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn:hover {
            background: var(--border);
            border-color: var(--text-secondary);
            transform: translateY(-1px);
        }

        .btn-primary {
            background: var(--accent);
            border-color: var(--accent);
        }

        .btn-primary:hover {
            background: #4f46e5;
            border-color: #4f46e5;
        }

        /* 6. Methodology Footer */
        .footer {
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border);
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        .method-box {
            background: rgba(255, 255, 255, 0.02);
            padding: 1.5rem;
            border-radius: 12px;
            margin-bottom: 2rem;
        }

        .method-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .method-item h4 {
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .loading {
            text-align: center;
            padding: 4rem;
            color: var(--text-secondary);
            font-size: 1.2rem;
        }
    </style>
</head>

<body>
    <div id="app" class="container">
        <!-- Header -->
        <header style="margin-bottom: 2rem; text-align: center;">
            <h1
                style="font-size: 2.25rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, #fff, #94a3b8); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;">
                ğŸ”— å…¨éˆè³‡é‡‘æµå‘æˆ°æƒ…å®¤</h1>
            <p style="color: var(--text-secondary); font-family: 'JetBrains Mono', monospace;">CEX & Chain Capital Flow
                Terminal v3.1</p>
        </header>

        <!-- Loading State -->
        <div v-if="loading" class="loading">
            <span style="display: inline-block; animation: pulse 1.5s infinite;">ğŸ“¡</span> æ­£åœ¨å»ºç«‹åŠ å¯†æ•¸æ“šé€£ç·š...
        </div>

        <!-- Error State -->
        <div v-else-if="error" class="loading" style="color: var(--bearish);">
            âŒ æ•¸æ“šè¼‰å…¥å¤±æ•—: {{ error }}
        </div>

        <!-- Main Content -->
        <div v-else>
            <!-- 2. AI Market Weather -->
            <div :class="['weather-banner', weatherClass]">
                <span style="font-size: 1.5rem;">{{ weatherIcon }}</span>
                <span>{{ weatherText }}</span>
            </div>

            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value text-neutral">${{ formatB(data.stablecoin_marketcap) }}B</div>
                    <div class="stat-label">ç©©å®šå¹£ç¸½å¸‚å€¼ (Market Cap)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value"
                        :class="data.cex_flows?.summary?.total_stablecoin_flow_24h > 0 ? 'text-green' : 'text-red'">
                        ${{ formatM(data.cex_flows?.summary?.total_stablecoin_flow_24h) }}M
                    </div>
                    <div class="stat-label">CEX 24H ç©©å®šå¹£æ·¨æµå‘</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value"
                        :class="data.cex_flows?.summary?.total_btc_eth_flow_24h > 0 ? 'text-red' : 'text-green'">
                        ${{ formatM(data.cex_flows?.summary?.total_btc_eth_flow_24h) }}M
                    </div>
                    <div class="stat-label">CEX 24H BTC/ETH æ·¨æµå‘</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value text-neutral">{{ formatTime(data.execution_time_seconds) }}s</div>
                    <div class="stat-label">ä¸Šæ¬¡æ›´æ–°: {{ formatDate(data.generated_at) }}</div>
                </div>
            </div>

            <!-- Chain Flows Table -->
            <div class="section">
                <div class="section-header">
                    <h2>ğŸ”— å…¬éˆè³‡é‡‘æµå‘ (Chain Flows)</h2>
                    <span style="font-size: 0.8rem; color: var(--text-secondary);">é¡¯ç¤ºå‰ 10 å¤§ TVL å…¬éˆ</span>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>å…¬éˆåç¨±</th>
                                <th @click="sortBy('tvl_total', 'chain')" class="sortable"
                                    :class="{active: chainSortKey === 'tvl_total'}">
                                    <span class="has-tooltip" data-tooltip="ç¸½é–å€‰é‡ã€‚ä»£è¡¨è©²éˆå…§çš„ç¸½è³‡é‡‘è¦æ¨¡ã€‚">TVL</span>
                                    <span class="sort-icon">â†•</span>
                                </th>
                                <th @click="sortBy('change_24h_pct', 'chain')" class="sortable"
                                    :class="{active: chainSortKey === 'change_24h_pct'}">
                                    24H è®Šå‹• <span class="sort-icon">â†•</span>
                                </th>
                                <th @click="sortBy('stable_inflow_24h', 'chain')" class="sortable"
                                    :class="{active: chainSortKey === 'stable_inflow_24h'}">
                                    <span class="has-tooltip" data-tooltip="å¸‚å ´çš„ã€ä¹¾ç«è—¥ã€ã€‚æ­£å€¼ä»£è¡¨è³‡é‡‘é€²å ´æº–å‚™è²·å¹£ (åˆ©å¤š)ã€‚">ç©©å®šå¹£æµå…¥</span>
                                    <span class="sort-icon">â†•</span>
                                </th>
                                <th style="text-align: left;">AI æ™ºèƒ½æ¨™ç±¤</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="chain in sortedChains" :key="chain.chain">
                                <td>{{ chain.chain }}</td>
                                <td class="text-neutral">${{ formatB(chain.tvl_total) }}B</td>
                                <td :class="chain.change_24h_pct >= 0 ? 'text-green' : 'text-red'">
                                    {{ chain.change_24h_pct >= 0 ? '+' : '' }}{{ chain.change_24h_pct }}%
                                </td>
                                <td :class="chain.stable_inflow_24h >= 0 ? 'text-green' : 'text-red'">
                                    ${{ formatM(chain.stable_inflow_24h) }}M
                                </td>
                                <td style="text-align: left;">
                                    <span v-for="tag in chain.tags" :key="tag.type" class="tag"
                                        :class="getTagClass(tag.signal)">
                                        {{ translateTag(tag.type) }}
                                    </span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- CEX Flows Table -->
            <div class="section">
                <div class="section-header">
                    <h2>ğŸ¦ äº¤æ˜“æ‰€è³‡é‡‘æµå‘ (CEX Flows)</h2>
                    <span style="font-size: 0.8rem; color: var(--text-secondary);">ç›£æ¸¬ç©©å®šå¹£èˆ‡é¢¨éšªè³‡ç”¢çš„é€²å‡º</span>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>äº¤æ˜“æ‰€</th>
                                <th @click="sortBy('total_tvl', 'cex')" class="sortable"
                                    :class="{active: cexSortKey === 'total_tvl'}">
                                    <span class="has-tooltip" data-tooltip="äº¤æ˜“æ‰€å…¬é–‹éŒ¢åŒ…è³‡ç”¢ç¸½å€¼ã€‚">TVL</span>
                                    <span class="sort-icon">â†•</span>
                                </th>
                                <th @click="sortBy('net_flow_24h', 'cex')" class="sortable"
                                    :class="{active: cexSortKey === 'net_flow_24h'}">
                                    æ·¨æµå‘ (Net) <span class="sort-icon">â†•</span>
                                </th>
                                <th @click="sortBy('stablecoin_flow_24h', 'cex')" class="sortable"
                                    :class="{active: cexSortKey === 'stablecoin_flow_24h'}">
                                    <span class="has-tooltip" data-tooltip="æ­£å€¼ä»£è¡¨è³‡é‡‘é€²å…¥äº¤æ˜“æ‰€ (æ½›åœ¨è²·ç›¤)ã€‚">ç©©å®šå¹£</span>
                                    <span class="sort-icon">â†•</span>
                                </th>
                                <th @click="sortBy('btc_eth_flow_24h', 'cex')" class="sortable"
                                    :class="{active: cexSortKey === 'btc_eth_flow_24h'}">
                                    <span class="has-tooltip" data-tooltip="æ½›åœ¨è³£å£“ã€‚é€šå¸¸ä»£è¡¨å¤§æˆ¶å°‡å¹£è½‰å…¥äº¤æ˜“æ‰€æº–å‚™è³£å‡º (åˆ©ç©º)ã€‚">BTC/ETH</span>
                                    <span class="sort-icon">â†•</span>
                                </th>
                                <th style="text-align: left;">AI æ™ºèƒ½æ¨™ç±¤</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="cex in sortedCex" :key="cex.exchange">
                                <td>{{ cex.exchange }}</td>
                                <td class="text-neutral">${{ formatB(cex.total_tvl) }}B</td>
                                <td :class="cex.net_flow_24h >= 0 ? 'text-green' : 'text-red'">
                                    ${{ formatM(cex.net_flow_24h) }}M
                                </td>
                                <td :class="cex.stablecoin_flow_24h >= 0 ? 'text-green' : 'text-red'">
                                    ${{ formatM(cex.stablecoin_flow_24h) }}M
                                </td>
                                <td :class="cex.btc_eth_flow_24h >= 0 ? 'text-red' : 'text-green'">
                                    ${{ formatM(cex.btc_eth_flow_24h) }}M
                                </td>
                                <td style="text-align: left;">
                                    <span v-for="tag in cex.tags" :key="tag.type" class="tag"
                                        :class="getTagClass(tag.signal)">
                                        {{ translateTag(tag.type) }}
                                    </span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- 5. Quant Zone -->
            <div class="quant-zone">
                <h3 style="color: var(--text-secondary); font-size: 1rem;">ğŸ‘¨â€ğŸ’» é‡åŒ–åˆ†æå°ˆå€ (Quant Zone)</h3>
                <p style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.5rem;">æ­¤æ•¸æ“šæ ¼å¼å°ˆç‚ºé‡åŒ–åˆ†ææ¨¡å‹
                    (Quantitative Models) å„ªåŒ–ï¼ŒåŒ…å«å®Œæ•´çš„è³‡é‡‘æ­¸å› æ¨™ç±¤èˆ‡æ­·å²æµå‘ç´€éŒ„ã€‚</p>
                <div class="btn-group">
                    <a href="./data.json" class="btn btn-primary" download>
                        <span>ğŸ“¥</span> åŒ¯å‡ºåŸå§‹æ•¸æ“š (JSON) | API å°ˆç”¨
                    </a>
                    <a href="./history.csv" class="btn" download>
                        <span>ğŸ“Š</span> ä¸‹è¼‰å›æ¸¬æ•¸æ“š (CSV) | é‡åŒ–å°ˆç”¨
                    </a>
                </div>
            </div>

            <!-- 6. Methodology Footer -->
            <div class="footer">
                <div class="method-box">
                    <strong>ğŸ“– åˆ†ææ–¹æ³•è«– (Methodology & Definitions)</strong>
                    <div class="method-grid">
                        <div class="method-item">
                            <h4>ğŸ’ª ä¸»åŠ›å¸ç±Œ (Buying Power)</h4>
                            <p>å®šç¾©ç‚ºç©©å®šå¹£ (USDT/USDC/DAI) æ·¨æµå…¥å–®ä¸€å¯¦é«” > $50M USDã€‚é€™é€šå¸¸ä»£è¡¨ä¸»åŠ›è³‡é‡‘å·²é€²å…¥å¸‚å ´ï¼Œæ­£åœ¨ç­‰å¾…æ©Ÿæœƒè²·å…¥ã€‚</p>
                        </div>
                        <div class="method-item">
                            <h4>âš ï¸ å€’è²¨é¢¨éšª (Dump Risk)</h4>
                            <p>å®šç¾©ç‚ºæ³¢å‹•æ€§è³‡ç”¢ (BTC/ETH) æ·¨æµå…¥äº¤æ˜“æ‰€ > $100M USDã€‚é€™ä»£è¡¨å¤§æˆ¶å°‡å†·éŒ¢åŒ…è³‡ç”¢è½‰ç§»è‡³äº¤æ˜“æ‰€ï¼Œå­˜åœ¨æ½›åœ¨æ‹‹å”®å£“åŠ›ã€‚</p>
                        </div>
                        <div class="method-item">
                            <h4>ğŸ“¡ æ•¸æ“šä¾†æº (Data Source)</h4>
                            <p>èšåˆ DefiLlama Protocol API èˆ‡å¤šéˆ RPC ç¯€é»æ•¸æ“šã€‚æˆ‘å€‘å·²ç®—æ³•å‰”é™¤äº¤æ˜“æ‰€å…§éƒ¨éŒ¢åŒ…è½‰å¸³çš„é›œè¨Šï¼Œä»¥åæ˜ çœŸå¯¦çš„è³‡é‡‘æµå‹•ã€‚</p>
                        </div>
                    </div>
                </div>
                <div style="text-align: center;">
                    <p>Powered by DefiLlama & Chain RPCs | Build v3.1 | Data updates every 30 mins</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    data: {},
                    loading: true,
                    error: null,
                    chainSortKey: 'stable_inflow_24h',
                    chainSortOrder: -1, // -1 for descending
                    cexSortKey: 'stablecoin_flow_24h',
                    cexSortOrder: -1
                }
            },
            computed: {
                weatherClass() {
                    const sentiment = this.data.market_sentiment || '';
                    if (sentiment.includes('Bullish')) return 'weather-bullish';
                    if (sentiment.includes('Bearish')) return 'weather-bearish';
                    return 'weather-neutral';
                },
                weatherIcon() {
                    if (this.weatherClass === 'weather-bullish') return 'ğŸŒ¤ï¸';
                    if (this.weatherClass === 'weather-bearish') return 'ğŸŒ§ï¸';
                    return 'â˜ï¸';
                },
                weatherText() {
                    if (this.weatherClass === 'weather-bullish')
                        return "å¸‚å ´æ™´æœ— (çœ‹å¤š) | è³‡é‡‘å¼·åŠ›é€²å ´ï¼Œä¸»åŠ›æ­£åœ¨ç´¯ç©ç±Œç¢¼ (USDT æµå…¥)ã€‚";
                    if (this.weatherClass === 'weather-bearish')
                        return "å¸‚å ´é™°é›¨ (çœ‹ç©º) | è³‡é‡‘æ­£åœ¨æ’¤é€€æˆ–è½‰ç§»è‡³äº¤æ˜“æ‰€ï¼Œæ³¨æ„å€’è²¨é¢¨éšªã€‚";
                    return "å¸‚å ´å¤šé›² (ç›¤æ•´) | è³‡é‡‘æµå‘ä¸æ˜é¡¯ï¼Œè§€æœ›æ°£æ°›æ¿ƒåšã€‚";
                },
                sortedChains() {
                    const chains = this.data.chain_flows?.chains || [];
                    return [...chains].sort((a, b) => {
                        const aVal = a[this.chainSortKey] || 0;
                        const bVal = b[this.chainSortKey] || 0;
                        return (aVal - bVal) * this.chainSortOrder;
                    });
                },
                sortedCex() {
                    const exchanges = this.data.cex_flows?.exchanges || [];
                    return [...exchanges].sort((a, b) => {
                        const aVal = a[this.cexSortKey] || 0;
                        const bVal = b[this.cexSortKey] || 0;
                        return (aVal - bVal) * this.cexSortOrder;
                    });
                }
            },
            methods: {
                // 4. Content Localization
                translateTag(tag) {
                    const map = {
                        "Buying Power": "ğŸ’ª ä¸»åŠ›å¸ç±Œ (è³¼è²·åŠ›)",
                        "Dump Risk": "âš ï¸ å€’è²¨é¢¨éšª (è³£å£“)",
                        "Capital Flight": "ğŸ’¸ è³‡é‡‘å¤–é€ƒ",
                        "Accumulation": "ğŸ“¥ ç´¯ç©ç±Œç¢¼",
                        "Withdrawal": "ğŸ”’ æå¹£å›¤è²¨",
                        "Strong Momentum": "ğŸš€ å‹•èƒ½å¼·å‹",
                        "Asset Rotation": "ğŸ”„ è³‡ç”¢è¼ªå‹•",
                        "Neutral": "â– ä¸­æ€§"
                    };
                    return map[tag] || tag;
                },
                sortBy(key, tableType) {
                    if (tableType === 'chain') {
                        if (this.chainSortKey === key) {
                            this.chainSortOrder *= -1; // toggle
                        } else {
                            this.chainSortKey = key;
                            this.chainSortOrder = -1; // default desc
                        }
                    } else {
                        if (this.cexSortKey === key) {
                            this.cexSortOrder *= -1;
                        } else {
                            this.cexSortKey = key;
                            this.cexSortOrder = -1;
                        }
                    }
                },
                formatB(num) {
                    return num ? (num / 1e9).toFixed(2) : '0.00';
                },
                formatM(num) {
                    return num ? (num / 1e6).toFixed(1) : '0.0';
                },
                formatTime(sec) {
                    return sec ? sec.toFixed(2) : '0.00';
                },
                formatDate(str) {
                    if (!str) return '-';
                    return new Date(str).toLocaleString('zh-TW', { hour12: false });
                },
                getTagClass(signal) {
                    if (signal === 'Bullish') return 'tag-bullish';
                    if (signal === 'Bearish') return 'tag-bearish';
                    return 'tag-neutral';
                },
                async fetchData() {
                    try {
                        // Anti-cache param
                        const response = await fetch(`./data.json?t=${new Date().getTime()}`);
                        if (!response.ok) throw new Error('ç„¡æ³•è¼‰å…¥ data.json');
                        this.data = await response.json();
                    } catch (e) {
                        this.error = e.message;
                    } finally {
                        this.loading = false;
                    }
                }
            },
            mounted() {
                this.fetchData();
                // Auto refresh every 5 mins
                setInterval(() => this.fetchData(), 5 * 60 * 1000);
            }
        }).mount('#app');
    </script>
</body>

</html>